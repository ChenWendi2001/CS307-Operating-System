## Chapter 2 Homework
陈文迪 519021910071

*作业中的引用内容均已标出*

#### 2.2 命令解释程序的功能目的是什么？为什么通常将它从内核中分离出来？
依照操作系统概念书中的定义，命令解释程序具有如下功能：
> **命令解释程序**是用户与操作系统界面的一种，利用命令解释程序，用户可以直接输入命令供操作系统执行。命令解释程序的主要功能便是获取并执行用户的下一条命令，或者也可以通过外壳脚本（shell script）来执行一组命令行步骤。

之所以将命令解释程序从内核中分离出来，一是因为shell往往位于用户层和系统调用层之间，并不属于基本的内核功能。二是因为系统往往可以有多个可选的命令解释程序，甚至有第三方的外壳和用户自己编写的外壳。将命令解释程序从内核中分离出来后，命令解释程序可以单独进行更换、升级，就如同一个特殊的软件。

#### 2.5 利用分层法进行系统设计的主要优点是什么？分层法的缺点是什么？

> 分层法的主要优点在于简化了系统的调试和验证。

这是因为对于任意一个层次，其仅仅使用更低层次的功能。根据这个特点，我们可以采用逐层调试的方法，由内而外地调试。这样的好处在于一旦发现错误，便可以将错误定位在该调试层，大大化简了系统构建的难度。

分层法的缺点主要有两点。首先
> 分层法的主要难点在于合理定义各层。

操作系统中的层次划分可能会因计算机系统的不同发生变化。例如备份存储驱动程序和CPU调度器之间的层次关系需要由实际系统需求而定，在通常的计算机系统中备份存储驱动程序在CPU调度器之上，而在大型系统中则相反。

第二个缺点是
> 与其他方法相比效率较差。

对于一个分层系统来说，任何操作或系统调用都需要将指令由外而内地进行传递。其中的每两层之间都存在数据的传递，会有一定的时间消耗，这就增加了系统总体的开销。

考虑到上述的优点和缺点，现代操作系统往往采用功能多而数量少的分层。

#### 2.7 为什么有些系统把操作系统存储在固件上，而其他系统存储在磁盘上？
> 对于小型操作系统、简单的支持硬件和耐用的操作，将操作系统存储在ROM中是合适的。

对于这一类的设备，其甚至并不支持磁盘设备，由于其操作系统在写入后往往不会更改，因此可以存放在固件中是合适的。但将操作系统存储在固件上总的来说存在三个问题。第一点是修改系统代码或引导程序代码需要修改ROM芯片（可以通过使用EPROM予以解决）。第二是在固件中执行代码速度较慢，因此需要将代码复制到RAM中执行。第三个问题是固件的价格较为昂贵、容量较小。这就导致在固件上存储操作系统的策略往往仅适用于操作系统不需要经常修改小型系统。对于大部分大型操作系统，操作系统体积较大，操作系统的升级、管理较为频繁，不适合使用ROM。对于这样的系统，一个更为合适的做法是
> 引导程序存放在固件上，而操作系统存放在磁盘上。

通过引导程序来执行引导块上的代码，再加载整个操作系统。通过这种模式
> 所有磁盘的引导程序和操作系统本身，通过向磁盘写入新的版本，就可以很容易地改变。

也可以提升代码的执行速度。
